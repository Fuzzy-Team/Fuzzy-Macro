<div class="main-content-container">
  <div id="config-nav" class="sub-nav-bar poppins-regular" style="margin-bottom: 2rem;">
    <div id="setting-bss" class="config-tab-item active">
      Bee Swarm Config
    </div>
    <div id="setting-priorities" class="config-tab-item">
      Task Priorities
    </div>
    <div id="setting-other" class="config-tab-item">
      Other Settings
    </div>
    <div id="setting-discord" class="config-tab-item" style="display: flex; align-items: center">
      Discord Config
    </div>
    <div id="setting-stream" class="config-tab-item" style="display: flex; align-items: center">
      Stream Config
    </div>
    <div id="setting-profiles" class="config-tab-item">
      User Profiles
    </div>
  </div>
  <div id="bss" class="standard-container sub-tab-panel active">
    <script>
      const parentBSS = document.getElementById("bss");
      buildStandardContainer(parentBSS, "Basic", "", [
        {
          id: "hive_number",
          title: "Hive slot",
          desc: "The hive slot claimed.<br>1 is the closest to cannon, 6 is the furthest.",
          type: {
            name: "dropdown",
            data: [1, 2, 3, 4, 5, 6],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "movespeed",
          title: "Movespeed",
          desc: "Your movespeed without any haste",
          type: {
            name: "textbox",
            inputType: "float",
            inputLimit: 5,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "bees",
          title: "Bees",
          desc: "The number of bees in your hive",
          type: {
            name: "textbox",
            inputType: "int",
            inputLimit: 2,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentBSS, "Sprinkler", "", [
        {
          id: "sprinkler_type",
          title: "Sprinkler Type",
          desc: "The type of sprinkler that you use. Note that the macro will stack the sprinklers on top of each other when placing them",
          type: {
            name: "dropdown",
            data: ["Basic", "Silver", "Golden", "Diamond", "Saturator"],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "sprinkler_slot",
          title: "Slot",
          desc: "The hotbar slot of the sprinkler",
          type: {
            name: "dropdown",
            data: [1, 2, 3, 4, 5, 6],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentBSS, "Goo", "", [
        {
          id: "goo_slot",
          title: "Slot",
          desc: "The hotbar slot of the goo",
          type: {
            name: "dropdown",
            data: [1, 2, 3, 4, 5, 6, 7],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentBSS, "Balloon", "", [
        {
          id: "convert_balloon",
          title: "Convert Balloon",
          desc: "How often the macro should convert the balloon",
          type: {
            name: "dropdown",
            data: ["Always", "Every", "Never"],
            triggerFunction: saveProfileTriggerFunction,
          },
        },
        {
          id: "convert_balloon_every",
          title: "Convert Balloon Every X Mins",
          desc: "Convert the balloon every X mins. Only applies if convert balloon is set to 'every'",
          type: {
            name: "textbox",
            inputType: "int",
            triggerFunction: saveProfileTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentBSS, "Preferences", "", [
        {
          id: "convert_wait",
          title: "Wait X secs after converting",
          desc: "Wait for X seconds after converting before moving. Useful for converting the last amount of pollen",
          type: {
            name: "textbox",
            inputType: "int",
            inputLimit: 3,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "max_convert_time",
          title: "Max Convert Time (Mins)",
          desc: "If the macro has been converting for over X minutes, it will trigger the timeout behavior.",
          type: {
            name: "textbox",
            inputType: "int",
            inputLimit: 2,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "convert_timeout_behavior",
          title: "Timeout Behavior",
          desc: "Choose whether to move on to the next task or rejoin the game when the convert timeout is reached.",
          type: {
            name: "dropdown",
            data: ["Move On", "Rejoin"],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);
    </script>
  </div>
  <div id="priorities" class="standard-container sub-tab-panel" style="display: none">
    <script>
      const parentPriorities = document.getElementById("priorities");

      // Helper function to get category for a task
      function getTaskCategory(taskId) {
        if (taskId.startsWith("gather_")) return "gather";
        if (taskId.startsWith("collect_")) return "collect";
        if (taskId.startsWith("kill_")) return "kill";
        if (taskId.startsWith("quest_")) return "quest";
        return "special";
      }

      // Helper function to get category badge text
      function getCategoryBadge(category) {
        const badges = {
          gather: "GATHER",
          collect: "COLLECT",
          kill: "KILL",
          quest: "QUEST",
          special: "SPECIAL",
        };
        return badges[category] || "";
      }

      // Create standard container using shared builder
      buildStandardContainer(parentPriorities, "Task Priority Order", "Drag and drop tasks to set their priority order. Tasks at the top have higher priority. Use the search box to quickly find tasks. Grayed out tasks are not in task queue, but can still be rearranged.", []);

      // Find the container we just created
      const priorityContainer = parentPriorities.querySelector('.standard-container');

      // Insert search input and drag list
      const dragListHTML = `
        <style>
          .priority-search-wrapper { display:flex; align-items:center; gap:8px; margin-bottom:12px; }
          .priority-search {
            width:100%;
            max-width:520px;
            padding:8px 12px;
            border-radius:8px;
            background:var(--surface);
            border:1px solid var(--border);
            color:var(--text-main);
            font-size:13px;
            box-shadow:none;
            outline:none;
            transition:box-shadow 0.12s ease, border-color 0.12s ease, transform 0.06s ease;
          }
          .priority-search::placeholder { color:var(--text-dim); }
          .priority-search:focus {
            border-color:var(--primary);
            box-shadow:0 0 0 6px rgba(var(--primary-rgb),0.08);
            transform:translateY(-1px);
          }
          @media (max-width:600px) { .priority-search { max-width:100%; } }
        </style>
        <div class="priority-search-wrapper">
          <input type="text" id="priority-search-input" class="priority-search" placeholder="üîç Search tasks... (e.g., 'pine', 'collect', 'kill')" />
        </div>
        <div id="task_priority_order" class="drag-list" data-onchange="saveSetting(this, 'profile')">
          <div class="drag-list-container" id="task_priority_order-container">
            <!-- items will be enhanced by config.js -->
            <div class="drag-item" data-id="gather_pine_tree" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Pine Tree</span></div>
            <div class="drag-item" data-id="gather_sunflower" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Sunflower</span></div>
            <div class="drag-item" data-id="gather_dandelion" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Dandelion</span></div>
            <div class="drag-item" data-id="gather_mushroom" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Mushroom</span></div>
            <div class="drag-item" data-id="gather_blue_flower" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Blue Flower</span></div>
            <div class="drag-item" data-id="gather_clover" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Clover</span></div>
            <div class="drag-item" data-id="gather_strawberry" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Strawberry</span></div>
            <div class="drag-item" data-id="gather_spider" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Spider</span></div>
            <div class="drag-item" data-id="gather_bamboo" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Bamboo</span></div>
            <div class="drag-item" data-id="gather_cactus" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Cactus</span></div>
            <div class="drag-item" data-id="gather_rose" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Rose</span></div>
            <div class="drag-item" data-id="gather_pineapple" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Pineapple</span></div>
            <div class="drag-item" data-id="gather_pumpkin" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Pumpkin</span></div>
            <div class="drag-item" data-id="gather_coconut" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Coconut</span></div>
            <div class="drag-item" data-id="gather_pepper" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Pepper</span></div>
            <div class="drag-item" data-id="gather_mountain_top" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Mountain Top</span></div>
            <div class="drag-item" data-id="gather_stump" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Gather: Stump</span></div>
            <div class="drag-item" data-id="collect_wealth_clock" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Wealth Clock</span></div>
            <div class="drag-item" data-id="collect_blueberry_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Blueberry Dispenser</span></div>
            <div class="drag-item" data-id="collect_strawberry_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Strawberry Dispenser</span></div>
            <div class="drag-item" data-id="collect_coconut_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Coconut Dispenser</span></div>
            <div class="drag-item" data-id="collect_royal_jelly_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Royal Jelly Dispenser</span></div>
            <div class="drag-item" data-id="collect_treat_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Treat Dispenser</span></div>
            <div class="drag-item" data-id="collect_ant_pass_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Ant Pass Dispenser</span></div>
            <div class="drag-item" data-id="collect_glue_dispenser" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Glue Dispenser</span></div>
            <div class="drag-item" data-id="collect_stockings" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Stockings</span></div>
            <div class="drag-item" data-id="collect_wreath" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Wreath</span></div>
            <div class="drag-item" data-id="collect_feast" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Feast</span></div>
            <div class="drag-item" data-id="collect_samovar" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Samovar</span></div>
            <div class="drag-item" data-id="collect_snow_machine" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Snow Machine</span></div>
            <div class="drag-item" data-id="collect_lid_art" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Lid Art</span></div>
            <div class="drag-item" data-id="collect_candles" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Candles</span></div>
            <div class="drag-item" data-id="collect_memory_match" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Memory Match</span></div>
            <div class="drag-item" data-id="collect_mega_memory_match" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Mega Memory Match</span></div>
            <div class="drag-item" data-id="collect_extreme_memory_match" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Extreme Memory Match</span></div>
            <div class="drag-item" data-id="collect_winter_memory_match" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Winter Memory Match</span></div>
            <div class="drag-item" data-id="collect_honeystorm" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Honeystorm</span></div>
            <div class="drag-item" data-id="collect_blue_booster" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Blue Booster</span></div>
            <div class="drag-item" data-id="collect_red_booster" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Red Booster</span></div>
            <div class="drag-item" data-id="collect_mountain_booster" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Mountain Booster</span></div>
            <div class="drag-item" data-id="collect_sticker_stack" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Sticker Stack</span></div>
            <div class="drag-item" data-id="collect_sticker_printer" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Sticker Printer</span></div>
            <div class="drag-item" data-id="kill_stump_snail" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Stump Snail</span></div>
            <div class="drag-item" data-id="kill_king_beetle" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: King Beetle</span></div>
            <div class="drag-item" data-id="kill_tunnel_bear" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Tunnel Bear</span></div>
            <div class="drag-item" data-id="kill_ladybug" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Ladybug</span></div>
            <div class="drag-item" data-id="kill_rhinobeetle" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Rhinobeetle</span></div>
            <div class="drag-item" data-id="kill_scorpion" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Scorpion</span></div>
            <div class="drag-item" data-id="kill_mantis" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Mantis</span></div>
            <div class="drag-item" data-id="kill_spider" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Spider</span></div>
            <div class="drag-item" data-id="kill_werewolf" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Werewolf</span></div>
            <div class="drag-item" data-id="kill_coconut_crab" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Kill: Coconut Crab</span></div>
            <div class="drag-item" data-id="mondo_buff" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Collect: Mondo Buff</span></div>
            <div class="drag-item" data-id="stinger_hunt" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Stinger Hunt</span></div>
            <div class="drag-item" data-id="auto_field_boost" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Auto Field Boost</span></div>
            <div class="drag-item" data-id="ant_challenge" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Ant Challenge</span></div>
            <div class="drag-item" data-id="quest_polar_bear" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Quest: Polar Bear</span></div>
            <div class="drag-item" data-id="quest_honey_bee" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Quest: Honey Bee</span></div>
            <div class="drag-item" data-id="quest_bucko_bee" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Quest: Bucko Bee</span></div>
            <div class="drag-item" data-id="quest_riley_bee" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Quest: Riley Bee</span></div>
            <div class="drag-item" data-id="blender" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Blender</span></div>
            <div class="drag-item" data-id="planters" draggable="true"><span class="drag-handle">‚ãÆ‚ãÆ</span><span class="drag-text">Planters</span></div>
          </div>
        </div>
      `;

      if (priorityContainer) priorityContainer.innerHTML += dragListHTML;

      // Enhance items with categories/actions (the shared config.js will also attach drag behavior)
      setTimeout(() => {
        const container = document.getElementById("task_priority_order-container");
        if (container) {
          const items = container.querySelectorAll(".drag-item");
          items.forEach((item) => {
            const taskId = item.getAttribute("data-id");
            if (taskId && !item.getAttribute("data-category")) {
              const category = getTaskCategory(taskId);
              const badge = getCategoryBadge(category);
              item.setAttribute("data-category", category);

              if (!item.querySelector(".category-badge")) {
                const dragText = item.querySelector(".drag-text");
                if (dragText) {
                  const badgeEl = document.createElement("span");
                  badgeEl.className = "category-badge";
                  badgeEl.textContent = badge;
                  dragText.parentNode.insertBefore(badgeEl, dragText);
                }
              }

              if (!item.querySelector(".drag-actions")) {
                const actionsDiv = document.createElement("div");
                actionsDiv.className = "drag-actions";
                actionsDiv.innerHTML = `
                  <button class="drag-action-btn move-to-top" title="Move to top">‚Üë Top</button>
                  <button class="drag-action-btn move-to-bottom" title="Move to bottom">‚Üì Bottom</button>
                `;
                item.appendChild(actionsDiv);
              }
            }
          });
        }
      }, 100);
    </script>
  </div>
  <div id="other" class="standard-container sub-tab-panel" style="display: none">
    <script>
      const parentOther = document.getElementById("other");
      buildStandardContainer(parentOther, "Rejoining", "", [
        {
          id: "private_server_link",
          title: "Private Server Link (Optional)",
          desc: "The link of a private server for the macro to join.<br>If left blank, the macro will join a public server instead",
          type: {
            name: "textbox",
            inputType: "string",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "rejoin_method",
          title: "Rejoin Method",
          desc: "How the macro should rejoin. Deeplink is highly recommended, and all other methods use the browser",
          type: {
            name: "dropdown",
            data: ["Deeplink", "New Tab", "Reload"],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "rejoin_every",
          title: "Rejoin Every X hours",
          desc: "How often the macro should rejoin. Set it as 0 to disable this feature.",
          type: {
            name: "textbox",
            inputType: "float",
            inputLimit: 4,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentOther, "Haste Compensation", "", [
        {
          id: "haste_compensation",
          title: "Enable Haste Compensation",
          desc: "Adjust the macro's movements based on the amount of haste the player has. This is done by searching for haste and bear morph buffs on the screen",
          type: {
            name: "checkbox",
            triggerFunction: saveProfileTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentOther, "Macro Theme", "", [
        {
          id: "gui_theme",
          title: "GUI Theme",
          desc: "Choose between the classic Purple theme or the new Brown theme",
          type: {
            name: "dropdown",
            data: ["Brown", "Purple"],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentOther, "Low Performance", "", [
        {
          id: "low_performance",
          title: "Enable Low Performance mode",
          desc: "Reduce the number of the macro's background processes",
          type: {
            name: "checkbox",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentOther, "Time Format", "", [
        {
          id: "hourly_report_time_format",
          title: "Hourly Report Time Format",
          desc: "Choose between 12-hour (AM/PM) or 24-hour format for hourly report time labels",
          type: {
            name: "dropdown",
            data: [12, 24],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "webhook_time_format",
          title: "Webhook Time Format",
          desc: "Choose between 12-hour (AM/PM) or 24-hour format for webhook message timestamps",
          type: {
            name: "dropdown",
            data: [12, 24],
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentOther, "Keybinds", "", [
        {
          id: "start_keybind",
          title: "Start Macro Keybind",
          desc: "Click to record a new keybind for starting the macro",
          type: {
            name: "keybind",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "stop_keybind",
          title: "Stop Macro Keybind",
          desc: "Click to record a new keybind for stopping the macro",
          type: {
            name: "keybind",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        // {
        //   id: "pause_keybind",
        //   title: "Pause/Resume Macro Keybind",
        //   desc: "Click to record a new keybind for pausing and resuming the macro",
        //   type: {
        //     name: "keybind",
        //     triggerFunction: saveGeneralTriggerFunction,
        //   },
        // },
      ]);
    </script>
  </div>
  <div id="discord" class="standard-container sub-tab-panel" style="display: none">
    <script>
      const parentDiscord = document.getElementById("discord");
      buildStandardContainer(parentDiscord, "Webhook", "", [
        {
          id: "enable_webhook",
          title: "Enable Webhook",
          desc: "A webhook to send the macro's status. Does not receive commands",
          type: {
            name: "checkbox",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "webhook_link",
          title: "Webhook Link",
          desc: "The link of the webhook for the macro to use",
          type: {
            name: "textbox",
            inputType: "string",
            length: 13,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "send_screenshot",
          title: "Send Screenshots",
          desc: "Send screenshots of the game via the webhook",
          type: {
            name: "checkbox",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "only_send_hourly_report",
          title: "Only Send Hourly Reports",
          desc: "Disable sending the regular status messages in the webhook and only send hourly reports",
          type: {
            name: "checkbox",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentDiscord, "Discord Bot", "", [
        {
          id: "discord_bot",
          title: "Enable Discord Bot",
          desc: "A discord bot to receive commands",
          type: {
            name: "checkbox",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "discord_bot_token",
          title: "Discord Bot Token",
          desc: "The token of your discord bot",
          type: {
            name: "textbox",
            inputType: "string",
            length: 13,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(parentDiscord, "Discord Pings", "", [
        {
          id: "enable_discord_ping",
          title: "Enable Discord Pings",
          desc: "Enable pinging your Discord user for important events",
          type: {
            name: "checkbox",
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
        {
          id: "discord_user_id",
          title: "Discord User ID",
          desc: "Your Discord User ID to ping for important events",
          type: {
            name: "textbox",
            inputType: "string",
            length: 13,
            triggerFunction: saveGeneralTriggerFunction,
          },
        },
      ]);

      buildStandardContainer(
        parentDiscord,
        "Ping Categories",
        "Choose which types of events should trigger Discord pings",
        [
          {
            id: "ping_critical_errors",
            title: "Critical Errors",
            desc: "Ping for critical errors like failed operations, system failures, and major issues",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_disconnects",
            title: "Disconnects",
            desc: "Ping when the macro fails to reconnect or has connection issues",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_character_deaths",
            title: "Character Deaths",
            desc: "Ping for all character deaths during gameplay",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_vicious_bee",
            title: "Vicious Bee Events",
            desc: "Ping for Vicious Bee defeats and related events",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_mondo_buff",
            title: "Mondo Buff Events",
            desc: "Ping for Mondo Buff collection and related events",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_ant_challenge",
            title: "Ant Challenge Events",
            desc: "Ping for Ant Challenge completions and related events",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_sticker_events",
            title: "Sticker Events",
            desc: "Ping for sticker printer claims and sticker-related events",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_mob_events",
            title: "Mob Events",
            desc: "Ping for mob defeats like Stump Snail, Coconut Crab, and other mobs",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_conversion_events",
            title: "Conversion Events",
            desc: "Ping for pollen conversion completions and related events",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "ping_hourly_reports",
            title: "Hourly Reports",
            desc: "Ping when hourly reports are generated and sent",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
        ]
      );
    </script>
  </div>
  <div id="stream" class="standard-container sub-tab-panel" style="display: none">
    <script>
      const parentStream = document.getElementById("stream");
      buildStandardContainer(
        parentStream,
        "Stream",
        "Stream your screen in real-time through a web link. Visit the gitbook for instructions on how to set it up",
        [
          {
            id: "enable_stream",
            title: "Enable Stream",
            desc: "Automatically start streaming",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          {
            id: "pin_stream_url",
            title: "Pin Stream URL in Discord",
            desc: "Automatically pin the stream URL message in Discord when streaming starts.<br>Requires both Discord Bot and Webhook to be enabled",
            type: {
              name: "checkbox",
              triggerFunction: saveGeneralTriggerFunction,
            },
          },
          // {
          //     id: "ngrok_auth",
          //     title: "Ngrok Authentication Token",
          //     desc: "Instructions for finding your ngrok auth token can be found in #guides",
          //     type: {
          //         name: "textbox",
          //         inputType: "string",
          //         length: 13,
          //         triggerFunction: saveGeneralTriggerFunction
          //     }
          // },

          // {
          //     id: "stream_resolution",
          //     title: "Stream Quality",
          //     desc: "The resolution of the stream. ",
          //     type: {
          //         name: "dropdown",
          //         data: [1.0, 0.75, 0.5, 0.25],
          //         triggerFunction: saveGeneralTriggerFunction
          //     }
          // },
          // {
          //     id: "stream_fps",
          //     title: "Stream Frame Rate",
          //     desc: "The frames per second (fps) of the stream. 30 is recommended, 60 max.",
          //     type: {
          //         name: "textbox",
          //         inputType: "integer",
          //         inputLimit: 2,
          //         triggerFunction: saveGeneralTriggerFunction
          //     }
          // },
          // {
          //     id: "stream_preset",
          //     title: "FFMPEG Preset",
          //     desc: "Encoding quality. Choose ultrafast if your device is unable to keep up with the stream",
          //     type: {
          //         name: "dropdown",
          //         data: ["veryfast", "ultrafast"],
          //         triggerFunction: saveGeneralTriggerFunction
          //     }

          // }
        ]
      );
    </script>
  </div>



  <div id="profiles" class="standard-container sub-tab-panel" style="display: none">
    <style>
      .profile-card {
        background: var(--surface);
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid var(--border);
      }

      .profile-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .profile-card-title {
        color: var(--text-main);
        font-size: 1.1rem;
        font-weight: 600;
      }

      .profile-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        max-height: 300px;
        overflow-y: auto;
      }

      .profile-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: var(--surface-hover);
        padding: 0.75rem 1rem;
        border-radius: 6px;
        border: 1px solid transparent;
        transition: all 0.2s ease;
      }

      .profile-item:hover {
        border-color: var(--primary);
      }

      .profile-item.active {
        border-color: var(--primary-hover);
        background: var(--surface);
      }

      .profile-item-name {
        color: var(--text-main);
      }
    </style>
    <div class="poppins-medium" style="display: block; justify-items: unset; padding-top: 0rem">
      <h2>Profile Management</h2>
      <p style="font-weight: 500; font-size: 1rem">
        Save and switch between different configuration profiles. Each profile
        stores your settings, field configurations, and task priorities
        separately.
      </p>
      <div class="seperator"></div>

      <!-- Current Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üìÅ Current Profile</span>
        </div>
        <div style="display: flex; align-items: center; gap: 1rem">
          <span id="current-profile-display"
            style="color: var(--primary); font-size: 1.2rem; font-weight: 600">Loading...</span>
        </div>
      </div>

      <!-- Switch Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üîÑ Switch Profile</span>
        </div>
        <p style="color: var(--text-dim); margin-bottom: 1rem; font-size: 0.9rem">
          Select a profile to switch to. Your current settings will be saved
          automatically.
        </p>
        <div class="profile-list" id="profile-list" style="max-height: 400px;">
          <!-- Profile items will be loaded dynamically -->
        </div>
      </div>

      <!-- Create Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">‚ûï Create New Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Create a new profile based on default settings.
        </p>
        <div style="display: flex; gap: 0.75rem; align-items: center">
          <input type="text" id="new-profile-name" class="profile-input" placeholder="Enter profile name..." />
          <button class="profile-btn profile-btn-success" onclick="createNewProfile()">
            Create Profile
          </button>
        </div>
        <div id="create-profile-status"></div>
      </div>

      <!-- Duplicate Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üìã Duplicate Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Create a copy of an existing profile with a new name.
        </p>
        <div style="
                display: flex;
                gap: 0.75rem;
                align-items: center;
                flex-wrap: wrap;
              ">
          <select id="duplicate-source-profile" class="profile-input" style="width: 150px">
            <!-- Options will be loaded dynamically -->
          </select>
          <span style="color: #b9bbbe">‚Üí</span>
          <input type="text" id="duplicate-new-name" class="profile-input" placeholder="New profile name..." />
          <button class="profile-btn profile-btn-primary" onclick="duplicateExistingProfile()">
            Duplicate
          </button>
        </div>
        <div id="duplicate-profile-status"></div>
      </div>

      <!-- Export Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üì§ Export Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Export a profile to a JSON file for backup or sharing.
        </p>
        <div style="
                display: flex;
                gap: 0.75rem;
                align-items: center;
                flex-wrap: wrap;
              ">
          <select id="export-profile-select" class="profile-input" style="width: 200px">
            <!-- Options will be loaded dynamically -->
          </select>
          <button class="profile-btn profile-btn-success" onclick="exportProfile()">
            Export Profile
          </button>
        </div>
        <div id="export-profile-status"></div>
      </div>

      <!-- Import Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üì• Import Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Import a profile from a JSON file. Choose a new name for the imported
          profile.
        </p>
        <div style="
                display: flex;
                gap: 0.75rem;
                align-items: center;
                flex-wrap: wrap;
              ">
          <input type="file" id="import-profile-file" accept=".json" style="display: none" />
          <button class="profile-btn profile-btn-secondary"
            onclick="document.getElementById('import-profile-file').click()">
            Choose File
          </button>
          <span id="import-file-name" style="color: #b9bbbe; font-size: 0.9rem">No file selected</span>
        </div>
        <div id="import-profile-status"></div>
      </div>

      <!-- Import Profile Modal -->
      <div id="import-profile-modal" style="
              display: none;
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(0, 0, 0, 0.7);
              z-index: 1000;
              justify-content: center;
              align-items: center;
            ">
        <div style="
                background: #36393f;
                border-radius: 8px;
                padding: 2rem;
                width: 400px;
                max-width: 90%;
                border: 1px solid #4f545c;
              ">
          <h3 style="color: #dcddde; margin: 0 0 1rem 0; font-size: 1.2rem">
            Import Profile
          </h3>

          <div style="margin-bottom: 1rem">
            <label style="
                    color: #b9bbbe;
                    display: block;
                    margin-bottom: 0.5rem;
                    font-size: 0.9rem;
                  ">
              Selected file:
              <span id="modal-selected-file" style="color: #dcddde"></span>
            </label>
          </div>

          <div style="margin-bottom: 1.5rem">
            <label style="
                    color: #b9bbbe;
                    display: block;
                    margin-bottom: 0.5rem;
                    font-size: 0.9rem;
                  ">
              Profile name:
            </label>
            <input type="text" id="modal-profile-name" class="profile-input" placeholder="Enter profile name..."
              style="width: 100%; box-sizing: border-box" />
          </div>

          <div style="display: flex; gap: 0.75rem; justify-content: flex-end">
            <button class="profile-btn profile-btn-secondary" onclick="hideImportModal()">
              Cancel
            </button>
            <button class="profile-btn profile-btn-primary" onclick="confirmImportProfile()">
              Import Profile
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>