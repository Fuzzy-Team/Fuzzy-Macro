<div class="main-content-container">
  <div id="profiles-content" class="standard-container">
    <style>
      .profile-card {
        background: var(--surface);
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid var(--border);
      }
      .profile-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
      }
      .profile-card-title {
        color: var(--text-main);
        font-size: 1.1rem;
        font-weight: 600;
      }
      .profile-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        max-height: 300px;
        overflow-y: auto;
      }
      .profile-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: var(--surface-hover);
        padding: 0.75rem 1rem;
        border-radius: 6px;
        border: 1px solid transparent;
        transition: all 0.2s ease;
      }
      .profile-item:hover {
        border-color: var(--primary);
      }
      .profile-item.active {
        border-color: var(--primary-hover);
        background: var(--surface);
      }
      .profile-item-name {
        color: var(--text-main);
      }
    </style>
    <div
      class="poppins-medium"
      style="display: block; justify-items: unset; padding-top: 1rem"
    >
      <h2>Profile Management</h2>
      <p style="font-weight: 500; font-size: 1rem">
        Save and switch between different configuration profiles. Each profile
        stores your settings, field configurations, and task priorities
        separately.
      </p>
      <div class="seperator"></div>

      <!-- Current Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üìÅ Current Profile</span>
        </div>
        <div style="display: flex; align-items: center; gap: 1rem">
          <span
            id="current-profile-display"
            style="color: #77bb7a; font-size: 1.2rem; font-weight: 600"
            >Loading...</span
          >
        </div>
      </div>

      <!-- Switch Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üîÑ Switch Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Select a profile to switch to. Your current settings will be saved
          automatically.
        </p>
        <div class="profile-list" id="profile-list">
          <!-- Profile items will be loaded dynamically -->
        </div>
      </div>

      <!-- Create Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">‚ûï Create New Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Create a new profile based on default settings.
        </p>
        <div style="display: flex; gap: 0.75rem; align-items: center">
          <input
            type="text"
            id="new-profile-name"
            class="profile-input"
            placeholder="Enter profile name..."
          />
          <button
            class="profile-btn profile-btn-success"
            onclick="createNewProfile()"
          >
            Create Profile
          </button>
        </div>
        <div id="create-profile-status"></div>
      </div>

      <!-- Duplicate Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üìã Duplicate Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Create a copy of an existing profile with a new name.
        </p>
        <div
          style="
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: wrap;
          "
        >
          <select
            id="duplicate-source-profile"
            class="profile-input"
            style="width: 150px"
          >
            <!-- Options will be loaded dynamically -->
          </select>
          <span style="color: #b9bbbe">‚Üí</span>
          <input
            type="text"
            id="duplicate-new-name"
            class="profile-input"
            placeholder="New profile name..."
          />
          <button
            class="profile-btn profile-btn-primary"
            onclick="duplicateExistingProfile()"
          >
            Duplicate
          </button>
        </div>
        <div id="duplicate-profile-status"></div>
      </div>

      <!-- Export Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üì§ Export Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Export a profile to a JSON file for backup or sharing.
        </p>
        <div
          style="
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: wrap;
          "
        >
          <select
            id="export-profile-select"
            class="profile-input"
            style="width: 200px"
          >
            <!-- Options will be loaded dynamically -->
          </select>
          <button
            class="profile-btn profile-btn-success"
            onclick="exportProfile()"
          >
            Export Profile
          </button>
        </div>
        <div id="export-profile-status"></div>
      </div>

      <!-- Import Profile Section -->
      <div class="profile-card">
        <div class="profile-card-header">
          <span class="profile-card-title">üì• Import Profile</span>
        </div>
        <p style="color: #b9bbbe; margin-bottom: 1rem; font-size: 0.9rem">
          Import a profile from a JSON file. Choose a new name for the imported
          profile.
        </p>
        <div
          style="
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: wrap;
          "
        >
          <input
            type="file"
            id="import-profile-file"
            accept=".json"
            style="display: none"
          />
          <button
            class="profile-btn profile-btn-secondary"
            onclick="document.getElementById('import-profile-file').click()"
          >
            Choose File
          </button>
          <span id="import-file-name" style="color: #b9bbbe; font-size: 0.9rem"
            >No file selected</span
          >
        </div>
        <div id="import-profile-status"></div>
      </div>

      <!-- Import Profile Modal -->
      <div
        id="import-profile-modal"
        style="
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.7);
          z-index: 1000;
          justify-content: center;
          align-items: center;
        "
      >
        <div
          style="
            background: #36393f;
            border-radius: 8px;
            padding: 2rem;
            width: 400px;
            max-width: 90%;
            border: 1px solid #4f545c;
          "
        >
          <h3 style="color: #dcddde; margin: 0 0 1rem 0; font-size: 1.2rem">
            Import Profile
          </h3>

          <div style="margin-bottom: 1rem">
            <label
              style="
                color: #b9bbbe;
                display: block;
                margin-bottom: 0.5rem;
                font-size: 0.9rem;
              "
            >
              Selected file:
              <span id="modal-selected-file" style="color: #dcddde"></span>
            </label>
          </div>

          <div style="margin-bottom: 1.5rem">
            <label
              style="
                color: #b9bbbe;
                display: block;
                margin-bottom: 0.5rem;
                font-size: 0.9rem;
              "
            >
              Profile name:
            </label>
            <input
              type="text"
              id="modal-profile-name"
              class="profile-input"
              placeholder="Enter profile name..."
              style="width: 100%; box-sizing: border-box"
            />
          </div>

          <div style="display: flex; gap: 0.75rem; justify-content: flex-end">
            <button
              class="profile-btn profile-btn-secondary"
              onclick="hideImportModal()"
            >
              Cancel
            </button>
            <button
              class="profile-btn profile-btn-primary"
              onclick="confirmImportProfile()"
            >
              Import Profile
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
