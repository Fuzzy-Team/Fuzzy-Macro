<!DOCTYPE html>
<html>

<head>
  <title>Fuzzy Macro</title>
  <link rel="stylesheet" href="styles/style.css" />
  <link rel="shortcut icon" type="image/x-icon" href="assets/general/icon.png" />
  <script type="text/javascript" src="./scripts/jquery.js"></script>
  <script type="text/javascript" src="./scripts/ui-builder.js"></script>
  <script type="text/javascript" src="./scripts/utilities.js"></script>
  <script type="text/javascript" src="./scripts/emojis.js"></script>
  <script>
    (function () {
      const theme = localStorage.getItem("gui_theme");
      if (!theme) return;
      const t = theme.toLowerCase();
      if (t === "purple") {
        document.documentElement.classList.add("theme-purple");
      } else if (t === "cream") {
        document.documentElement.classList.add("theme-cream");
      } else if (t === "red" ) {
        document.documentElement.classList.add("theme-red");
      } else if (t === "blue") {
        document.documentElement.classList.add("theme-blue");
      }
    })();
  </script>
</head>

<body>
  <div class="app-container">
    <!-- Sidebar -->
    <div class="sidebar-container">
      <div class="app-title">
        Fuzzy Macro
      </div>
      <div id="tabs-placeholder">
        <!-- Tabs loaded via JS -->
      </div>
      <div class="credits">
        <span id="version">Loading version...</span><br>
        <button id="update-btn" class="purple-button">Check for updates</button>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content-container">
      <div id="home-placeholder" class="content" style="display: flex;"></div>
      <div id="gather-placeholder" class="content"></div>
      <div id="collect-placeholder" class="content"></div>
      <div id="config-placeholder" class="content"></div>
      <div id="kill-placeholder" class="content"></div>
      <div id="planters-placeholder" class="content"></div>
      <div id="boost-placeholder" class="content"></div>
      <div id="quests-placeholder" class="content"></div>

    </main>
  </div>

  <script type="text/javascript" src="/eel.js"></script>
  <script src="./scripts/script.js"></script>
  <script src="./scripts/tabs/tab.js"></script>
  <script src="./scripts/tabs/home.js"></script>
  <script src="./scripts/tabs/gather.js"></script>
  <script src="./scripts/tabs/config.js"></script>
  <script src="./scripts/tabs/collect.js"></script>
  <script src="./scripts/tabs/kill.js"></script>
  <script src="./scripts/tabs/planters.js"></script>
  <script src="./scripts/tabs/boost.js"></script>
  <script src="./scripts/tabs/quests.js"></script>
  <script>
    // Fetch version from version.txt and optionally append commit hash
    (async () => {
      try {
        const vRes = await fetch('./version.txt');
        const version = (await vRes.text()).trim();
        let display = 'v' + (version || '?');
        // try to fetch optional commit marker written by updater
        try {
          const cRes = await fetch('./updated_commit.txt');
          if (cRes.ok) {
            const commit = (await cRes.text()).trim();
            if (commit) display += ' - ' + commit;
          }
        } catch (e) {
          // ignore if marker missing or fetch fails
        }
        document.getElementById('version').textContent = display;
      } catch (e) {
        document.getElementById('version').textContent = 'v?';
      }
    })();
  </script>
</body>

</html>